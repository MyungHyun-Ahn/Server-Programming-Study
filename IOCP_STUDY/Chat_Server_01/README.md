# IOCP 8단계 실습 - 채팅서버 만들기 1
## 채팅서버
 * 채팅서버는 일반적인 MO 구조의 게임 서버와 비슷하다.
 * 채팅서버에서 게임 컨텐츠만 추가하면 게임이 된다.
 * 8단계에서는 애플리케이션의 기능을 하기 때문에 클라이언트가 원하는 요청을 한 것을 처리해주어야 한다.

## 해야할 것
 * 패킷 구조 만들기
 * 로그인 처리

## 패킷 설계
 1. 패킷 헤더 구조체 생성 (length, id, type) : 1바이트 패킹
 2. 패킷의 종류에 따라 Packet 구조체 확장 (Connect, Close, Login)

## map 자료구조 사용하여 id와 함수 포인터 매핑
 * map 선언 key : id, value : 함수 포인터
 * id 값에 따른 함수 포인터 저장

## 설계
 1. 워커 스레드 4개에서 (연결, 끊어짐, 패킷 도착)을 완료 처리하고 있었음
 2. 완료 처리 받은 것을 패킷 큐에다 저장 -> 락 처리
 3. 패킷 스레드에서 큐의 데이터를 꺼냄 -> 락 처리
 4. 패킷 큐에서 꺼낸 것을 패킷 해더 구조체로 캐스팅
 5. 패킷 헤더 구조체에서 멤버 변수인 id를 추출
 6. map 자료구조 사용해서 id 값으로 함수 포인터 불러온 후 해당 함수로 Send

