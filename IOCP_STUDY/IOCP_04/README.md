# IOCP 4단계 실습 - 네트워크 / 로직 처리 각각의 쓰레드로 분리
## Send를 Recv와 다른 쓰레드에서 보내기
### 기존 처리 방식
 - GetQueuedCompletionStatus 함수 호출
 - 완료 결과의 enum 값에 따라 분류하여 처리
 - IOCP를 다루는 쓰레드에서 네트워크 처리, 로직 처리, 패킷 처리 모든 일을 함
 - 하는 일의 양이 너무 많다!

### 네트워크, 로직 처리 쓰레드를 분리
 - GetQueuedCompletionStatus - 완료 정보를 받아와서
 - 로직 처리 Thread로 옮겨서 처리
 - 로직 처리 쓰레드에서의 작업은 공유 자원에 접근
 - Lock을 걸어 처리하는 것이 중요

### Send를 연속적으로 보낼 수 있는 구조로 만들기
 - 지금은 동일한 버퍼 하나를 덮어쓰고 있음
 - 비동기 IO에서는 이전의 작업이 끝나지 않았을 수도 있다.
 - wsaBuf를 동적 할당해서 사용 -> 매번 새로운 버퍼를 생성
 - 이전의 Send가 완료되지 않아도 다음 Send 작업을 진행할 수 있다.